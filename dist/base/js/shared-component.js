"use strict";var articleClassName="output",scrollToOffset=30,scrollCheckPoints=[];function generateCatalog(){var e=document.getElementsByClassName(articleClassName)[0],a=document.createElement("div");a.className="catalog",e.firstChild.before(a);var t=!0,o=!1,l=void 0;try{for(var r,c=e.childNodes[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var n=r.value;switch(n.nodeName){case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":s(n)}}}catch(e){o=!0,l=e}finally{try{t||null==c.return||c.return()}finally{if(o)throw l}}function s(e){var t=document.createElement("div");t.className="catalog-"+e.nodeName.toLowerCase(),t.innerHTML=e.textContent,a.appendChild(t);var o=function(e){var t=e.offsetTop,o=e.offsetParent;for(;null!==o;)t+=o.offsetTop,o=o.offsetParent;return t}(e);scrollCheckPoints.push({top:o,catalogItem:t}),t.addEventListener("click",function(){window.scrollTo(0,o-scrollToOffset)})}}function watchProgress(){var e=document.createElement("div");e.className="progress-bar";var a=document.createElement("div");if(a.className="progress",e.appendChild(a),document.body.firstChild.before(e),a){var t=function(){var t=getScrollTop(),e=document.body.clientHeight-window.innerHeight,o=t/e;a.style.width=100*o+"vw",e-t<10?l(scrollCheckPoints[scrollCheckPoints.length-1].catalogItem,"catalog-item-focuson"):scrollCheckPoints.some(function(e){if(t+scrollToOffset+2>e.top)return function(e,t){var o=!1,a=!0,l=!1,r=void 0;try{for(var c,n=e[Symbol.iterator]();!(a=(c=n.next()).done);a=!0){var s=c.value;if(t===s){o=!0;break}}}catch(e){l=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}o&&console.log(123);return o}(e.catalogItem.classList,"catalog-item-focuson")||l(e.catalogItem,"catalog-item-focuson"),!1})};t(),window.addEventListener("scroll",t)}function l(t,o){scrollCheckPoints.forEach(function(e){e.catalogItem===t?e.catalogItem.classList.add(o):e.catalogItem.classList.remove(o)})}}function getScrollTop(){return document.documentElement.scrollTop||document.body.scrollTop}generateCatalog(),watchProgress();
//# sourceMappingURL=shared-component.js.map